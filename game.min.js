const img=e=>{const f=new Image;return f.src=e,f},IMG_FLOOR=img("img_prod/floor-min.png"),IMG_WALL_N=img("img_prod/wall_n-min.png"),rd=Math.random,fl=Math.floor,TS=64,PLAYER_SIZE=TS/2,MAP_SIZE=50,VIEWPORT=18,INFINITY=1/0,VIEWPORT_SIZE=TS*VIEWPORT,DIR=["s","n","e","w"],_=1,_BG="bg",_O="r",_H="h",_R="k",_D="d",_B="b",_P="p",_R_N="r_n",E_S="e_s",C={},IMG={};C[E_S]="#ceceb5",C[_BG]="black",C[_O]="#777",C[_H]=C[_O],C[_R]="#141111",C[_R_N]=C[_R],C[_D]="#513520",C[_B]="#c1ad9e",C[_P]="orange",IMG[_O]=IMG_FLOOR,IMG[_H]=IMG_FLOOR,IMG[_R_N]=IMG_WALL_N,IMG[_D]=IMG_FLOOR,IMG[_B]=IMG_FLOOR;class PriorityQueue{constructor(){this._nodes=[]}enqueue(e,f){this._nodes.push({key:f,priority:e}),this.sort()}dequeue(){return this._nodes.shift().key}sort(){this._nodes.sort(function(e,f){return e.priority-f.priority})}isEmpty(){return!this._nodes.length}}class Graph{constructor(){this.vertices={}}addVertex(e,f){this.vertices[e]=f}shortestPath(e,f){let o,q,r,s,j=new PriorityQueue,k={},l={},n=[];for(q in this.vertices)q===e?(k[q]=0,j.enqueue(0,q)):(k[q]=INFINITY,j.enqueue(INFINITY,q)),l[q]=null;for(;!j.isEmpty();){if(o=j.dequeue(),o===f){for(n=[];l[o];)n.push(o),o=l[o];break}if(o&&k[o]!==INFINITY)for(r in this.vertices[o])s=k[o]+this.vertices[o][r],s<k[r]&&(k[r]=s,l[r]=o,j.enqueue(s,r))}return n}}class Sprite{constructor(e,f,j,k,l){this.img=new Image,this.img.src=e,this.w=f,this.h=j,this.r_w=k||f,this.r_h=l||j,this.getDrawArgsForIndex=this.getDrawArgsForIndex.bind(this)}getDrawArgsForIndex(e,f,j){return[this.img,e*this.w,0,this.w,this.h,f,j,this.r_w,this.r_h]}}class Item{constructor(e,f){this.x=e,this.y=f}}class Oil extends Item{constructor(e,f){super(e,f),this.img=img("img_prod/oil-min.png")}}class Picture extends Item{constructor(e,f){super(e,f),this.img=img("img_prod/picture-min.png")}}class Room{constructor(e,f,j,k){this.x=e,this.y=f,this.width=j,this.height=k}randomLocationInRoom(){return{x:this.x+fl(rd()*this.width),y:this.y+fl(rd()*this.height)}}}class Dungeon{constructor(e){this.characters=[],this.items=[],this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.map=Array(MAP_SIZE),this.s_door_ns=new Sprite("img_prod/s_doors_ns-min.png",TS,TS),this.s_door_ew=new Sprite("img_prod/s_doors_ew-min.png",TS,TS);for(let f=0;f<MAP_SIZE;f++){this.map[f]=Array(MAP_SIZE);for(let j=0;j<MAP_SIZE;j++)this.map[f][j]=_R}this.generate()}placeCharacter(e){this.characters.unshift(e)}setPlayer(e){this.player=e}generateRooms(e){let o=[];const q=(s,u)=>{return s.x<u.x+u.width&&s.x+s.width>u.x&&s.y<u.y+u.height&&s.height+s.y>u.y},r=s=>{let u=!0;return o.forEach(v=>{!1==u||q(v,s)&&(u=!1)}),u};for(let s=0;s<800;s++){const u=7+Math.round(rd()*11),v=7+Math.round(rd()*11),z=Math.round(rd()*(MAP_SIZE-u-1)),A=Math.round(rd()*(MAP_SIZE-v-1)),B=new Room(z,A,u,v);r(B)&&o.push(B)}return o.map(s=>{s.x+=_,s.width-=_,s.y+=_,s.height-=_;for(let u=s.y;u<s.y+s.height;u++)for(let v=s.x;v<s.x+s.width;v++)e[u][v]=_O,u===s.y&&(e[u-1][v]=_R_N);return s})}generateMaze(){const e=this.map,f=1,j=()=>{return DIR[Math.round(rd()*DIR.length)]},k=(l,n,o,q,r)=>{const s=e[n][l];if(s!=o)return!1;if(s!=_R)return!1;let u=!0;if("s"===r?e[n+f]&&e[n+f][l]==_R&&e[n][l-f]==_R&&e[n][l+f]==_R||(u=!1):"n"===r?e[n-f]&&e[n-f][l]==_R&&e[n][l-f]==_R&&e[n][l+f]==_R||(u=!1):"w"===r?e[n][l-f]&&e[n][l-f]==_R&&e[n+f]&&e[n+f][l]==_R&&e[n-f]&&e[n-f][l]==_R||(u=!1):"e"===r?e[n][l+f]&&e[n][l+f]==_R&&e[n+f]&&e[n+f][l]==_R&&e[n-f]&&e[n-f][l]==_R||(u=!1):void 0,!u)return!1;e[n][l]=q;for(let v=!1,z=0;!1==v&&5>z;){const A=j();"s"===A?(e[n+f]&&(v=k(l,n+f,e[n+f][l],q,"s")),e[n][l+f]&&(v=k(l+f,n,e[n][l+f],q,"e")),e[n][l-f]&&(v=k(l-f,n,e[n][l-f],q,"w"))):"n"===A?(e[n-f]&&(v=k(l,n-f,e[n-f][l],q,"n")),e[n][l-f]&&(v=k(l-f,n,e[n][l-f],q,"w")),e[n][l+f]&&(v=k(l+f,n,e[n][l+f],q,"e"))):"w"===A?(e[n][l-f]&&(v=k(l-f,n,e[n][l-f],q,"w")),e[n-f]&&(v=k(l,n-f,e[n-f][l],q,"n")),e[n+f]&&(v=k(l,n+f,e[n+f][l],q,"s"))):"e"===A?(e[n][l+f]&&(v=k(l+f,n,e[n][l+f],q,"e")),e[n-f]&&(v=k(l,n-f,e[n-f][l],q,"n")),e[n+f]&&(v=k(l,n+f,e[n+f][l],q,"s"))):void 0,z++}return!0};for(let l=0;l<MAP_SIZE;l++)for(let n=0;n<MAP_SIZE;n++)e[l][n]==_R&&e[l-f]&&e[l+f]&&e[l][n-f]&&e[l][n+f]&&e[l-f][n]==_R&&e[l+f][n]==_R&&e[l][n-f]==_R&&e[l][n+f]==_R&&k(n,l,_R,_H,j());return e}connectRooms(e){const f=this.map,j=(k,l,n)=>{return f[l-1]&&f[l-1][k]==n||f[l+1]&&f[l+1][k]==n||!(f[l][k-1]!=n)||!(f[l][k+1]!=n)};e.forEach(k=>{const l=[];for(let o=k.y-1;o<k.y+k.height+1;o++)for(let q=k.x-1;q<k.x+k.width+1;q++)f[o][q]==_R&&j(q,o,_O)&&j(q,o,_H)&&l.push({x:q,y:o});for(let o=0;o<4;o++){const q=Math.round(rd()*(l.length-1)),r=l[q];r&&(f[r.y][r.x]=_D,f[r.y-1][r.x]===_R&&(f[r.y-1][r.x]=_R_N))}})}removeDeadEnds(){const e=this.map;for(let f=!1;!f;){f=!0;for(let j=0;j<MAP_SIZE;j++)for(let k=0;k<MAP_SIZE;k++)if(e[j][k]==_H||e[j][k]==_D){let l=0;e[j-1]&&e[j-1][k]!=_R&&l++,e[j+1]&&e[j+1][k]!=_R&&l++,e[j][k-1]!=_R&&l++,e[j][k+1]!=_R&&l++,2>l&&(e[j][k]=_R,f=!1)}}for(let j=0;j<MAP_SIZE;j++)for(let k=0;k<MAP_SIZE;k++)e[j-1]&&e[j][k]===_H&&e[j-1][k]===_R&&(e[j-1][k]=_R_N)}generateItems(){this.item_index={},this.rooms.forEach(e=>{const f=e.randomLocationInRoom(),j=new Oil(f.x,f.y);this.addItem(j);const k=e.randomLocationInRoom(),l=new Picture(k.x,k.y);this.addItem(l)})}addItem(e){this.items.push(e),this.item_index[e.y+"|"+e.x]=e}getItemInLoc(e,f){const j=this.item_index[f+"|"+e];return j?(this.item_index[f+"|"+e]=void 0,j):null}generate(){this.rooms=this.generateRooms(this.map),this.generateMaze(),this.connectRooms(this.rooms),this.removeDeadEnds(),this.generateItems(),this.startingRoom=this.randomRoom(),this.buildGraph()}buildGraph(){const e=j=>{return j!=_R&&j!=_R_N&&typeof j!=void 0},f=(j,k)=>{const l={};return this.map[j-1]&&e(this.map[j-1][k])&&(l[j-1+"|"+k]=1),this.map[j+1]&&e(this.map[j+1][k])&&(l[j+1+"|"+k]=1),e(this.map[j][k+1])&&(l[j+"|"+(k+1)]=1),e(this.map[j][k-1])&&(l[j+"|"+(k-1)]=1),l};this.graph=new Graph,this.map.forEach((j,k)=>{j.forEach((l,n)=>{e(l)&&this.graph.addVertex(k+"|"+n,f(k,n))})})}randomRoom(){return this.rooms[Math.round(rd()*(this.rooms.length-1))]}toggleDoor(e,f){this.map[f][e]==_D?this.map[f][e]=_B:this.map[f][e]==_B&&(this.map[f][e]=_D)}render(){this.renderMap(),this.renderItems(),this.renderCharacters(),this.renderPlayerLightRadius()}renderMap(){const e=this.map,f=this.player;this.ctx.fillStyle=C[_BG],this.ctx.fillRect(1,1,MAP_SIZE*TS,MAP_SIZE*TS);for(let j=fl(this.vpStart("y"));j<fl(this.vpStart("y"))+VIEWPORT-_;j++)for(let k=fl(this.vpStart("x"));k<fl(this.vpStart("x"))+VIEWPORT-_;k++)if(e[j]&&e[j][k]){const l=this.vpAdjust(k,"x")*TS,n=this.vpAdjust(j,"y")*TS;if(C[e[j][k]]&&(this.ctx.fillStyle=C[e[j][k]],this.ctx.fillRect(l,n,TS+_,TS+_)),IMG[e[j][k]]&&this.ctx.drawImage(IMG[e[j][k]],l-_,n-_,TS+_,TS+_),e[j][k]==_D||e[j][k]==_B){const o=e[j][k]==_D?0:1,q=e[j-1][k]==_O||e[j+1][k]==_O?"ns":"ew";this.ctx.drawImage(...this["s_door_"+q].getDrawArgsForIndex(o,l,n))}}}renderCharacters(){this.characters.forEach(e=>{const f=this.vpAdjustRealCoord(e.loc.x,"x"),j=this.vpAdjustRealCoord(e.loc.y,"y");e.drawSprite(this.ctx,f,j)})}renderItems(){this.items.forEach(e=>{if(this.item_index[e.y+"|"+e.x]){const f=this.vpAdjust(e.x,"x")*TS,j=this.vpAdjust(e.y,"y")*TS;this.ctx.drawImage(e.img,f,j)}})}vpAdjust(e,f){return e-this.vpStart(f)}vpAdjustRealCoord(e,f){return e-this.vpStart(f)*TS}vpStart(e){let f=this.player.loc[e]/TS-VIEWPORT/2.5+_;return 0>f&&(f=0),f}renderPlayerLightRadius(){if(!this.player)return!1;const e=this.player,f=e.loc,j=this.vpAdjustRealCoord(f.x,"x")+TS/4,k=this.vpAdjustRealCoord(f.y,"y")+TS/4,n=3-0.3*(e.torch-10),o=this.ctx.createRadialGradient(j,k,VIEWPORT_SIZE/(n+rd()*0.12),j,k,0);o.addColorStop(0,"black"),o.addColorStop(1,"rgba(0,0,0,0)"),this.ctx.fillStyle=o,this.ctx.fillRect(j-VIEWPORT_SIZE/2,k-VIEWPORT_SIZE/2,2*VIEWPORT_SIZE,2*VIEWPORT_SIZE)}}class Game{constructor(e){this.canvas=e,this.ctx=e.getContext("2d"),this.game_text="",this.current_consecutive_game=0,this.game_active=!0,this.TORCH_DEGRADE_INTERVAL=12000,this.TORCH_DEGRADE_RATE=4,this.TEXT_PRINT_INTERVAL=500,this.OBJECTIVE_GOAL=12,this.changeDirection=this.changeDirection.bind(this),this.stopMovement=this.stopMovement.bind(this),this.gameLoop=this.gameLoop.bind(this),this.bindKeys(),this.dirTransform={w:"n",a:"w",s:"s",d:"e",e:"e"},this.gameStartScreen()}audioSetup(){this.aCtx=new AudioContext,this.ma_osc=this.aCtx.createOscillator(),this.ma_gain=this.aCtx.createGain(),this.ma_panner=this.aCtx.createPanner(),this.ma_panner.panningModel="HRTF",this.ma_panner.refDistance=1,this.ma_panner.maxDistance=MAP_SIZE,this.ma_osc.frequency.value=35.75,this.ma_gain.gain.value=5,this.ma_osc.type="triangle",this.ma_osc.connect(this.ma_gain),this.ma_gain.connect(this.ma_panner),this.ma_panner.connect(this.aCtx.destination),this.aCtx.listener.setPosition(this.player.loc.x/TS,this.player.loc.y/TS,0),this.ma_osc.start(0)}gameLoop(){this.game_active&&(this.frames++,this.level.render(),this.torchLoop(),this.textLoop(),this.monsterSoundAura(),this.monster&&0==this.frames%30&&this.AI(this.monster,this.player,this.level,this.level.ctx),window.requestAnimationFrame(this.gameLoop))}loseGame(){this.game_active=!1,this.current_consecutive_game++,this.level=new Dungeon(this.canvas),this.gameOverScreen()}gameStartScreen(){this.frames=0;const e=j=>{"e"==j.key&&(document.removeEventListener("keypress",e),this.gameStartScreenOn=!1,this.game_active=!0,this.newGame())};document.addEventListener("keypress",e),this.gameStartScreenOn=!0;const f=()=>{this.frames++,this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,1e3,1e3),this.ctx.fillStyle="#fff",this.ctx.font="83px Courier",this.ctx.fillText("Are You Lost?",70,300),this.ctx.font="18px Courier",this.ctx.fillText("You'll need headphones to hear me coming.",150,360),this.ctx.fillText("Use [W][A][S][D] to run away. [E] to interact.",130,430),this.ctx.font="24px Courier",this.ctx.fillText("Press [E] to play with me.",180,530),this.pixelate(this.ctx,470,250,300,83,5,3*rd()),this.pixelate(this.ctx,430,340,160,18,3,3*rd()),this.pixelate(this.ctx,350,410,90,18,3,3*rd()),this.pixelate(this.ctx,360,510,180,24,3,3*rd()),this.gameStartScreenOn&&window.requestAnimationFrame(f)};f()}newGame(){this.current_second=0,this.objective_counter=0,this.torchCounter=0,this.textCounter=0,this.frames=0,this.level=new Dungeon(this.canvas),this.GAME_START=performance.now(),this.game_active=!0,this.placePlayer(),setTimeout(()=>{this.placeMonster()},1e3),this.level.setPlayer(this.player),this.audioSetup(),this.gameLoop()}gameOverScreen(){this.frames=0;const e=j=>{"e"==j.key&&(document.removeEventListener("keypress",e),this.gameOverScreenOn=!1,this.aCtx.close(),this.newGame())};document.addEventListener("keypress",e),this.gameOverScreenOn=!0;const f=()=>{this.frames++,this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,1e3,1e3),this.ctx.fillStyle="#fff",this.ctx.font="83px Courier",this.ctx.fillText("I FOUND YOU",70,300),this.ctx.font="24px Courier",this.ctx.fillText("Press [E] to play again.",180,530),this.pixelate(this.ctx,70,250,600,120,10,10*rd()),this.pixelate(this.ctx,360,510,180,24,3,3*rd()),this.gameOverScreenOn&&window.requestAnimationFrame(f)};f()}winGame(){this.game_active=!1,this.gameWinScreen()}gameWinScreen(){this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,1e3,1e3),this.ctx.fillStyle="#000",this.ctx.font="83px Courier",this.ctx.fillText("You made it.",70,300),this.ctx.font="24px Courier",this.ctx.fillText("I'm proud of you.",210,530),document.body.style="background-color: white;"}pixelate(e,f,j,k,l,n,o){for(let u=f;u<f+k;u+=n)for(let v=j;v<j+l;v+=n)if(0.5<rd()*o){const z=0.3;var r=e.getImageData(u,v,n,n);const B=u+rd()*z,D=v+rd()*z;var s=e.getImageData(B,D,n,n);e.fillStyle="rgb("+s.data[0]+","+s.data[1]+","+s.data[2]+")",e.fillRect(u,v,n,n),e.fillStyle="rgb("+r.data[0]+","+r.data[1]+","+r.data[2]+")",e.fillRect(B,D,n,n)}}AI(e,f,j){const l=fl(e.loc.x/TS),n=fl(e.loc.y/TS),o=fl(f.loc.x/TS),q=fl((f.loc.y+f.h)/TS),r=j.graph.shortestPath(q+"|"+o,n+"|"+l);if(!r.length&&l!=o&&n!=q){const z=j.randomRoom().randomLocationInRoom();return e.teleport(z.x*TS,z.y*TS)}if(2>r.length)return this.loseGame();const s=r[1].split("|"),u={y:s[0],x:s[1]};let v=null;u.y<n?v="n":u.y>n?v="s":u.x<l?v="w":u.x>l&&(v="e"),e.move(v)}torchLoop(){const e=performance.now()-this.GAME_START;fl(e/this.TORCH_DEGRADE_INTERVAL)>this.torchCounter&&(--this.player.torch,this.torchCounter++)}monsterSoundAura(){this.monster&&(this.ma_panner.setPosition((this.monster.loc.x+this.monster.w/2)/TS,(this.monster.loc.y+this.monster.h/2)/TS,0),this.aCtx.listener.setPosition(this.player.loc.x/TS,this.player.loc.y/TS,0))}setText(e){this.game_text=e,this.current_text_letter=0,this.textCounter=0}textLoop(){this.level.ctx.font="24px Courier",this.level.ctx.fillStyle="white",this.level.ctx.fillText(this.game_text.substr(0,this.current_text_letter),100,750);const e=performance.now()-this.GAME_START;fl(e/this.TEXT_PRINT_INTERVAL)>this.textCounter&&this.game_text.length>this.current_text_letter&&(this.current_text_letter++,this.textCounter++)}bindKeys(){document.removeEventListener("keypress",this.changeDirection),document.addEventListener("keypress",this.changeDirection),document.removeEventListener("keyup",this.stopMovement),document.addEventListener("keyup",this.stopMovement)}itemPickupCallback(e,f){f instanceof Picture&&this.advanceObjective()}advanceObjective(){this.objective_counter++,this.setText(this.monster.dialog[this.objective_counter-1]),this.objective_counter>=this.OBJECTIVE_GOAL&&this.winGame()}placePlayer(){this.player=new Player(this.level,this.itemPickupCallback.bind(this));const e=this.level.startingRoom,f=e.x+fl(e.width/2),j=e.y+fl(e.height/2);this.player.teleport(f*TS,j*TS),this.level.placeCharacter(this.player)}placeMonster(){const e=new Monster(this.level),f=this.level.randomRoom().randomLocationInRoom();e.teleport(f.x*TS,f.y*TS),this.level.placeCharacter(e),this.monster=e;let j=this.monster.ng_dialog[this.current_consecutive_game];j||(this.current_consecutive_game=0,j=this.monster.ng_dialog[this.current_consecutive_game]),this.setText(j)}stopMovement(e){this.player&&this.player.stopMovement(this.dirTransform[e.key])}changeDirection(e){if(this.player){this.player.move;"e"==e.key?this.player.interact():this.dirTransform[e.key]&&this.player.move(this.dirTransform[e.key])}}}class Character{constructor(e){this.TILE=_P,this.loc={x:0,y:0},this.dungeon=e,this.move=this.move.bind(this),this.interact=this.interact.bind(this),this.state={moving:!1,direction:"s",sprite_index:0}}drawSprite(e,f,j){e.drawImage(...this.getCurrentSpriteArgs(f,j))}getCurrentSpriteArgs(e,f){return this.state.moving?this["s_walk_"+this.state.direction].getDrawArgsForIndex(this.state.sprite_index,e,f):this.s_idle.getDrawArgsForIndex(0,e,f)}interact(){const e=fl((this.loc.x+this.w/2)/TS),f=fl((this.loc.y+this.h/2)/TS);[{x:e,y:f},{x:e,y:f-1},{x:e-1,y:f},{x:e,y:f+1},{x:e+1,y:f}].forEach(l=>{{const n=this.dungeon.map[l.y][l.x];(n==_D||n==_B)&&this.dungeon.toggleDoor(l.x,l.y);const o=this.dungeon.getItemInLoc(l.x,l.y);o&&this.pickupItem(o)}})}pickupItem(e){e instanceof Oil&&(12<this.torch+2?this.torch=12:this.torch+=2),this.itemPickupCallback(this,e)}move(e){if(this.state.moving&&this.state.direction==e)return!1;let f=0;const j=k=>{if(this.state.moving&&this.state.direction===k){const l={x:this.loc.x,y:this.loc.y},n=this.SPEED;"n"===k?l.y=this.loc.y-n:"w"===k?l.x=this.loc.x-n:"s"===k?l.y=this.loc.y+n:"e"===k?l.x=this.loc.x+n:void 0;this.isValidLoc(l)&&(this.loc=l),30>f%this.spriteCadence&&this.nextSprite(),f+=30,setTimeout(()=>{j(k)},30)}};this.state.moving=!0,this.state.direction=e,j(e)}nextSprite(){return 3<this.state.sprite_index+1?this.state.sprite_index=0:this.state.sprite_index+=1,this.state.sprite_index}stopMovement(e){this.state.direction===e&&(this.state.moving=!1,this.state.sprite_index=!1)}isValidWalkingTile(e){return e==_O||e==_H||e==_B}isValidLoc(e){const f=v=>{return fl(v/TS)},j=(v,z)=>{if(!this.dungeon.map[z]||!this.dungeon.map[z][v])return!1;const A=this.dungeon.map[z][v];return this.isValidWalkingTile(A)},k=f(e.x),l=f(e.y),n=f(e.x+this.cw),r=f(e.y+this.ch);return j(k,r)&&j(n,r)}teleport(e,f){this.loc={x:e,y:f}}}class Player extends Character{constructor(e,f){super();const j="img_prod/s_pc_";this.itemPickupCallback=f,this.w=this.cw=34,this.h=this.ch=47,this.animated=!0,this.SPEED=0.15*TS,this.s_idle=new Sprite(j+"idle-min.png",this.w/2,this.h/2,this.w,this.h),DIR.forEach(k=>{this["s_walk_"+k]=new Sprite(j+"walk_"+k+"-min.png",this.w/2,this.h/2,this.w,this.h)}),this.dungeon=e,this.torch=6,this.spriteCadence=100}}class Enemy extends Character{}class Monster extends Enemy{constructor(e){super();const f="img_prod/monster_walk_";this.animated=!0,this.SPEED=0.12*TS,this.spriteCadence=100,this.w=128,this.h=64,this.cw=this.ch=0,this.s_idle=new Sprite(f+"w-min.png",this.w/2,this.h/2,this.w,this.h),DIR.forEach(j=>{this["s_walk_"+j]=new Sprite(f+"w-min.png",this.w/2,this.h/2,this.w,this.h)}),this.TILE=E_S,this.dungeon=e,this.dialog=["oh, I wouldn't do that...","you'll hurt yourself running like that.","what is it you're trying to do?","i'll find you eventually.","i always do...","it's rude to run you know","You are getting closer.","Why do you want to run from me?","You won't find the next one.","I like the way you wriggle when you run.","You won't get out of here"],this.ng_dialog=["I can smell you.","oh... you're back.","I just want to talk this time, I promise..."]}isValidWalkingTile(e){return e==_O||e==_H||e==_B||e==_D}drawSprite(e,f,j){e.drawImage(...this.getCurrentSpriteArgs(f,j))}}const canvas=document.getElementById("game"),g=new Game(canvas);
